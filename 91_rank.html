<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>91乱斗从夯到拉排名</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #333;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.1rem;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .name-list {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .name-list h2 {
            text-align: center;
            margin-bottom: 15px;
            color: #444;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        
        .names {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .name-item {
            background: #f0f8ff;
            padding: 10px 15px;
            border-radius: 20px;
            cursor: grab;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            user-select: none;
        }
        
        .name-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15);
        }
        
        .name-item.dragging {
            opacity: 0.5;
        }
        
        .rankings {
            flex: 2;
            min-width: 600px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .rank-category {
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }
        
        .rank-category.highlight {
            transform: scale(1.02);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .rank-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .rank-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
            color: white;
        }
        
        .rank-title {
            font-size: 1.3rem;
            font-weight: bold;
        }
        
        .rank-description {
            font-size: 0.9rem;
            color: #777;
            margin-left: auto;
        }
        
        .rank-items {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            min-height: 60px;
        }
        
        .empty-message {
            color: #aaa;
            font-style: italic;
            width: 100%;
            text-align: center;
            padding: 10px;
        }
        
        /* 不同档次的样式 */
        .rank-1 .rank-icon { background: linear-gradient(45deg, #ff6b6b, #ff8e8e); }
        .rank-1 .rank-title { color: #ff6b6b; }
        
        .rank-2 .rank-icon { background: linear-gradient(45deg, #4ecdc4, #6ae0d8); }
        .rank-2 .rank-title { color: #4ecdc4; }
        
        .rank-3 .rank-icon { background: linear-gradient(45deg, #45b7d1, #67c7e0); }
        .rank-3 .rank-title { color: #45b7d1; }
        
        .rank-4 .rank-icon { background: linear-gradient(45deg, #96ceb4, #b1d9c6); }
        .rank-4 .rank-title { color: #96ceb4; }
        
        .rank-5 .rank-icon { background: linear-gradient(45deg, #d4a5a5, #e0b9b9); }
        .rank-5 .rank-title { color: #d4a5a5; }
        
        .actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }
        
        button {
            padding: 12px 25px;
            border: none;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .reset-btn {
            background: #ff6b6b;
            color: white;
        }
        
        .reset-btn:hover {
            background: #ff5252;
            transform: translateY(-3px);
        }
        
        .save-btn {
            background: #4ecdc4;
            color: white;
        }
        
        .save-btn:hover {
            background: #3db8af;
            transform: translateY(-3px);
        }
        
        .load-btn {
            background: #ffa726;
            color: white;
        }
        
        .load-btn:hover {
            background: #ff9800;
            transform: translateY(-3px);
        }
        
        .add-name-btn {
            background: #ab47bc;
            color: white;
        }
        
        .add-name-btn:hover {
            background: #9c27b0;
            transform: translateY(-3px);
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            color: #777;
            font-size: 0.9rem;
        }
        
        .status-info {
            text-align: center;
            margin: 15px 0;
            color: #666;
            font-size: 0.9rem;
        }

        .add-name-section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .add-name-form {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .add-name-input {
            flex: 1;
            min-width: 200px;
            padding: 10px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 20px;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s;
        }

        .add-name-input:focus {
            border-color: #4ecdc4;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .rankings {
                min-width: 100%;
            }

            .add-name-form {
                flex-direction: column;
                align-items: stretch;
            }

            .add-name-input {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>91乱斗从夯到拉排名</h1>
            <p class="subtitle">拖动名字到对应的档次中，创建您的专属排名</p>
        </header>

        <div class="add-name-section">
            <div class="add-name-form">
                <input type="text" class="add-name-input" id="newNameInput" placeholder="输入新名字...">
                <button class="add-name-btn" id="addNameBtn">添加名字</button>
            </div>
        </div>
        
        <div class="status-info">
            <span id="statusText">已排名: 0/35 | 未排名: 35/35</span>
        </div>
        
        <div class="main-content">
            <div class="name-list">
                <h2>待排名名单</h2>
                <div class="names" id="nameList">
                    <!-- 名字将通过JavaScript动态添加 -->
                </div>
            </div>
            
            <div class="rankings">
                <div class="rank-category rank-1" data-rank="1">
                    <div class="rank-header">
                        <div class="rank-icon">夯</div>
                        <div class="rank-title">夯</div>
                        <div class="rank-description">顶级中的顶级</div>
                    </div>
                    <div class="rank-items" id="rank1"></div>
                </div>
                
                <div class="rank-category rank-2" data-rank="2">
                    <div class="rank-header">
                        <div class="rank-icon">顶</div>
                        <div class="rank-title">顶级</div>
                        <div class="rank-description">非常优秀</div>
                    </div>
                    <div class="rank-items" id="rank2"></div>
                </div>
                
                <div class="rank-category rank-3" data-rank="3">
                    <div class="rank-header">
                        <div class="rank-icon">人</div>
                        <div class="rank-title">人上人</div>
                        <div class="rank-description">还不错</div>
                    </div>
                    <div class="rank-items" id="rank3"></div>
                </div>
                
                <div class="rank-category rank-4" data-rank="4">
                    <div class="rank-header">
                        <div class="rank-icon">N</div>
                        <div class="rank-title">NPC</div>
                        <div class="rank-description">普通水平</div>
                    </div>
                    <div class="rank-items" id="rank4"></div>
                </div>
                
                <div class="rank-category rank-5" data-rank="5">
                    <div class="rank-header">
                        <div class="rank-icon">拉</div>
                        <div class="rank-title">拉完了</div>
                        <div class="rank-description">一言难尽</div>
                    </div>
                    <div class="rank-items" id="rank5"></div>
                </div>
            </div>
        </div>
        
        <div class="actions">
            <button class="reset-btn" id="resetBtn">重置排名</button>
            <button class="save-btn" id="saveBtn">保存排名</button>
            <button class="load-btn" id="loadBtn">加载排名</button>
        </div>
        
        <footer>
            <p>从夯到拉排名生成器 &copy; 2025 | 拖动名字到对应档次创建您的排名</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 初始名单数据
            let nameList = [
                "祝家浩", "郭耀臻", "鲁杰", "王雨秋", "王主君",
                "杨智誉", "黄贤", "王梓沣", "王冬雨", "王佳楠",
                "徐帅", "梁硕", "贾辰", "朗思呈", "李学贤",
                "董忠铸", "牧峰", "钱裕堂", "徐橙汁", "夏凌晨",
                "朱忠伟", "林华昱", "张帅", "张晓东", "翁捷宁", 
                "金卡丹", "骆嘉诚", "何天下", "周弈全", "孙爽",
                "赵鸣泽",  "骆嘉敏", "邢鹏振", "滕鸿百", "杨喻墨"
				
            ];
            
            // DOM元素
            const nameListContainer = document.getElementById('nameList');
            const statusText = document.getElementById('statusText');
            const newNameInput = document.getElementById('newNameInput');
            const addNameBtn = document.getElementById('addNameBtn');
            
            // 初始化应用
            function initApp() {
                // 检查是否有保存的排名数据
                const savedRankings = localStorage.getItem('rankings');
                const savedNameList = localStorage.getItem('nameList');
                
                // 如果有保存的名单，使用保存的名单
                if (savedNameList) {
                    nameList = JSON.parse(savedNameList);
                }
                
                if (savedRankings) {
                    // 如果有保存的数据，询问是否加载
                    if (confirm('检测到有保存的排名数据，是否加载？')) {
                        loadRankings();
                    } else {
                        // 否则初始化空排名
                        initEmptyRankings();
                    }
                } else {
                    // 没有保存的数据，初始化空排名
                    initEmptyRankings();
                }
                
                // 更新状态信息
                updateStatusInfo();
            }
            
            // 初始化空排名
            function initEmptyRankings() {
                // 清空所有排名区域
                document.querySelectorAll('.rank-items').forEach(container => {
                    container.innerHTML = '';
                    const emptyMsg = document.createElement('div');
                    emptyMsg.className = 'empty-message';
                    emptyMsg.textContent = '拖动名字到这里';
                    container.appendChild(emptyMsg);
                });
                
                // 初始化名字列表
                renderNameList();
            }
            
            // 渲染名字列表
            function renderNameList() {
                nameListContainer.innerHTML = '';
                nameList.forEach(name => {
                    createNameElement(name, nameListContainer);
                });
            }
            
            // 创建名字元素
            function createNameElement(name, container) {
                const nameElement = document.createElement('div');
                nameElement.className = 'name-item';
                nameElement.textContent = name;
                nameElement.draggable = true;
                nameElement.dataset.name = name;
                
                // 添加拖拽事件
                nameElement.addEventListener('dragstart', handleDragStart);
                nameElement.addEventListener('dragend', handleDragEnd);
                
                container.appendChild(nameElement);
                return nameElement;
            }
            
            // 获取所有排名区域
            const rankContainers = document.querySelectorAll('.rank-items');
            rankContainers.forEach(container => {
                container.addEventListener('dragover', handleDragOver);
                container.addEventListener('dragenter', handleDragEnter);
                container.addEventListener('dragleave', handleDragLeave);
                container.addEventListener('drop', handleDrop);
            });
            
            // 拖拽相关变量
            let draggedItem = null;
            let sourceContainer = null;
            
            // 拖拽事件处理函数
            function handleDragStart(e) {
                draggedItem = this;
                sourceContainer = this.parentElement;
                this.classList.add('dragging');
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/plain', this.dataset.name);
            }
            
            function handleDragEnd() {
                this.classList.remove('dragging');
                // 移除所有高亮效果
                document.querySelectorAll('.rank-category').forEach(category => {
                    category.classList.remove('highlight');
                });
            }
            
            function handleDragOver(e) {
                e.preventDefault();
                return false;
            }
            
            function handleDragEnter(e) {
                e.preventDefault();
                this.parentElement.classList.add('highlight');
            }
            
            function handleDragLeave() {
                this.parentElement.classList.remove('highlight');
            }
            
            function handleDrop(e) {
                e.preventDefault();
                this.parentElement.classList.remove('highlight');
                
                // 获取拖动的名字
                const name = e.dataTransfer.getData('text/plain');
                
                // 如果是从左侧名字列表拖过来的
                if (sourceContainer === nameListContainer) {
                    // 从左侧列表中移除该名字
                    const nameElement = nameListContainer.querySelector(`[data-name="${name}"]`);
                    if (nameElement) {
                        nameElement.remove();
                    }
                    
                    // 创建新的名字元素并添加到当前排名区域
                    createNameElement(name, this);
                } else {
                    // 如果是从其他排名区域拖过来的
                    // 先移除原位置的名字
                    const existingItem = sourceContainer.querySelector(`[data-name="${name}"]`);
                    if (existingItem) {
                        existingItem.remove();
                    }
                    
                    // 创建新的名字元素并添加到当前排名区域
                    createNameElement(name, this);
                    
                    // 如果原排名区域空了，添加空状态消息
                    updateEmptyState(sourceContainer);
                }
                
                // 更新当前排名区域的空状态
                updateEmptyState(this);
                
                // 更新状态信息
                updateStatusInfo();
                
                return false;
            }
            
            // 更新空状态显示
            function updateEmptyState(container) {
                const emptyMsg = container.querySelector('.empty-message');
                if (container.children.length === 0) {
                    // 如果没有元素，添加空状态消息
                    const newEmptyMsg = document.createElement('div');
                    newEmptyMsg.className = 'empty-message';
                    newEmptyMsg.textContent = '拖动名字到这里';
                    container.appendChild(newEmptyMsg);
                } else if (emptyMsg && container.children.length > 1) {
                    // 如果有其他元素，移除空状态消息
                    emptyMsg.remove();
                }
            }
            
            // 更新状态信息
            function updateStatusInfo() {
                const rankedCount = document.querySelectorAll('.rank-items .name-item').length;
                const unrankedCount = nameListContainer.querySelectorAll('.name-item').length;
                const totalCount = nameList.length;
                statusText.textContent = `已排名: ${rankedCount}/${totalCount} | 未排名: ${unrankedCount}/${totalCount}`;
            }
            
            // 添加新名字
            function addNewName() {
                const newName = newNameInput.value.trim();
                if (!newName) {
                    alert('请输入名字！');
                    return;
                }
                
                if (nameList.includes(newName)) {
                    alert('该名字已存在！');
                    return;
                }
                
                // 添加到名单
                nameList.push(newName);
                
                // 保存更新后的名单
                localStorage.setItem('nameList', JSON.stringify(nameList));
                
                // 添加到左侧列表
                createNameElement(newName, nameListContainer);
                
                // 清空输入框
                newNameInput.value = '';
                
                // 更新状态信息
                updateStatusInfo();
                
                alert(`名字 "${newName}" 添加成功！`);
            }
            
            // 保存排名
            function saveRankings() {
                const rankings = {};
                
                // 收集每个档次的排名
                document.querySelectorAll('.rank-category').forEach(category => {
                    const rank = category.dataset.rank;
                    const rankTitle = category.querySelector('.rank-title').textContent;
                    const names = Array.from(category.querySelectorAll('.rank-items .name-item')).map(item => item.textContent);
                    
                    rankings[rankTitle] = names;
                });
                
                // 保存到本地存储
                localStorage.setItem('rankings', JSON.stringify(rankings));
                localStorage.setItem('nameList', JSON.stringify(nameList));
                localStorage.setItem('saveTime', new Date().toLocaleString());
                
                alert('排名已保存！下次打开页面时会自动加载。');
                console.log('保存的排名数据:', rankings);
            }
            
            // 加载排名
            function loadRankings() {
                const savedRankings = localStorage.getItem('rankings');
                if (!savedRankings) {
                    alert('没有找到保存的排名数据！');
                    return;
                }
                
                const rankings = JSON.parse(savedRankings);
                
                // 清空所有排名区域
                document.querySelectorAll('.rank-items').forEach(container => {
                    container.innerHTML = '';
                });
                
                // 清空左侧名字列表
                nameListContainer.innerHTML = '';
                
                // 加载每个档次的排名
                document.querySelectorAll('.rank-category').forEach(category => {
                    const rankTitle = category.querySelector('.rank-title').textContent;
                    const container = category.querySelector('.rank-items');
                    
                    if (rankings[rankTitle] && rankings[rankTitle].length > 0) {
                        rankings[rankTitle].forEach(name => {
                            createNameElement(name, container);
                        });
                    } else {
                        // 如果没有名字，添加空状态消息
                        const emptyMsg = document.createElement('div');
                        emptyMsg.className = 'empty-message';
                        emptyMsg.textContent = '拖动名字到这里';
                        container.appendChild(emptyMsg);
                    }
                });
                
                // 将未排名的名字添加到左侧列表
                const allRankedNames = Object.values(rankings).flat();
                nameList.forEach(name => {
                    if (!allRankedNames.includes(name)) {
                        createNameElement(name, nameListContainer);
                    }
                });
                
                // 更新状态信息
                updateStatusInfo();
                
                alert('排名加载成功！');
            }
            
            // 重置按钮事件
            document.getElementById('resetBtn').addEventListener('click', function() {
                if (confirm('确定要重置所有排名吗？')) {
                    initEmptyRankings();
                    updateStatusInfo();
                }
            });
            
            // 保存按钮事件
            document.getElementById('saveBtn').addEventListener('click', saveRankings);
            
            // 加载按钮事件
            document.getElementById('loadBtn').addEventListener('click', loadRankings);
            
            // 添加名字按钮事件
            addNameBtn.addEventListener('click', addNewName);
            
            // 按Enter键添加名字
            newNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    addNewName();
                }
            });
            
            // 初始化应用
            initApp();
        });
    </script>
</body>
</html>